Report: Play/Pause Integration Issues and Fixes
=============================================

Problem summary
---------------
- After adding Play/Pause controls with Plotly animation frames, the world map choropleth intermittently dropped country fills as frames advanced.
- Sliders that were visible in the original (restyle-based) version stopped rendering in the updated animated version, leaving only the external Play/Pause buttons.

Root causes
-----------
- Switching to Plotly animation frames replaced the existing choropleth trace data on each frame; countries with missing values or projection recalculations would occasionally render as empty, producing the flicker you observed.
- Plotly hides the slider UI when it is driven solely by frames without an explicit slider layout definition; the onRender hook also did not force the slider container to display.

What changed
------------
- Rebuilt all three visuals (map, income bars, continent lines) to keep the slider-driven **restyle** approach from the original code, while adding Play/Pause controls that advance the slider programmatically.
- Precomputed frame payloads in R for each year and passed them to JavaScript via `htmlwidgets::onRender`, ensuring consistent data across slider steps and playback.
- Forced the slider container to remain visible and synchronized slider state with Play/Pause events, stopping playback when the user drags the slider manually.

Expected result
---------------
- The choropleth no longer drops countries between frames because the same restyle payload is reused for every step.
- Sliders render for every plot and remain in sync with the Play/Pause buttons; manual slider changes immediately pause playback and update the visualization.
